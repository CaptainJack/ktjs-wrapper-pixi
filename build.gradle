buildscript {
	ext.kotlin_version = "1.2.10"
	
	repositories {
		maven { url "http://artifactory.capjack.ru/public" }
	}
	dependencies {
		classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
		classpath "ru.capjack.degos:degos-publish:1.+"
	}
}

group "ru.capjack.ktjs"

apply plugin: "kotlin2js"
apply plugin: "capjack.degos-publish"

repositories {
	maven { url "http://artifactory.capjack.ru/public" }
}

dependencies {
	compile "org.jetbrains.kotlin:kotlin-stdlib-js:$kotlin_version"
}

task sourcesJar(type: Jar) {
	classifier = "sources"
	from sourceSets.main.kotlin
}

artifacts {
	archives sourcesJar
}

compileKotlin2Js {
	kotlinOptions {
		moduleKind = "commonjs"
		sourceMap = true
		sourceMapEmbedSources = "always"
	}
}

publishing {
	publications {
		lib(MavenPublication) {
			from components.java
			artifact sourcesJar
		}
	}
}